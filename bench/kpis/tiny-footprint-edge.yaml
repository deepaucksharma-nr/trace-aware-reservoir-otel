rules:
  - name: "Memory Usage"
    description: "Memory usage should be well below threshold"
    metric: "process_runtime_heap_alloc_bytes"
    min_value: 0
    max_value: 200000000 # 200MB
    critical: true

  - name: "CPU Usage"
    description: "CPU usage should be minimal"
    metric: "process_cpu_seconds_total"
    min_value: 0
    max_value: 15 # Per minute
    critical: true
    
  - name: "Reservoir Size"
    description: "Reservoir should maintain expected size"
    metric: "reservoir_size"
    min_value: 900 # Expected to be close to 1000
    max_value: 1100
    critical: true
    
  - name: "Sampling Rate"
    description: "System should process traces at minimum rate"
    metric: "sampled_spans_total"
    min_value: 100 # Minimum spans per minute
    max_value: 0 # No upper limit
    critical: true
    
  - name: "Checkpoint Duration"
    description: "Checkpoints should complete quickly"
    metric: "checkpoint_duration_seconds"
    min_value: 0
    max_value: 2 # 2 seconds max
    critical: false
    
  - name: "Database Size"
    description: "Database size should remain minimal"
    metric: "reservoir_db_size_bytes"
    min_value: 0
    max_value: 100000000 # 100 MB
    critical: false
